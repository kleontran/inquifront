{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/hacker/Desktop/1inqui/INQUILINO-PERFECTO/inquilino-front/src/Viviendas/CreateHome.js\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport NewMap from \"../Utils/NewMap\";\n\nfunction CreateHome() {\n  _s();\n\n  const center = {\n    lat: 42.1617654,\n    lng: -8.6196778\n  };\n  const [ciudad, setCiudad] = useState(\"\");\n  const [provincia, setProvincia] = useState(\"\");\n  const [direccion, setDireccion] = useState(\"\");\n  const [nHabitaciones, setNHabitaciones] = useState(\"\");\n  const [m2, setM2] = useState(\"\");\n  const [nBanos, setNBanos] = useState(\"\");\n  const [precio_piso, setPrecio_piso] = useState(\"\"); // const [ascensor, setAscensor] = useState(false)\n  // const [garaje, setGaraje] = useState(false)\n  // const [balcon, setBalcon] = useState(false)\n  // const [jardin, setJardin] = useState(false)\n\n  const [descripcion, setDescripcion] = useState(\"\"); // const [position, setPosition] = useState(center)\n  // const latitude = position.lat\n  // const longitude = position.lng\n\n  const [error, setError] = useState();\n  const login = useSelector(s => s.login);\n  const history = useHistory();\n\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const pisoImagen = e.target.pisoImagen.files[0];\n    const fd = new FormData();\n    fd.append(\"imagen\", pisoImagen);\n    fd.append(\"ciudad\", ciudad);\n    fd.append(\"provincia\", provincia);\n    fd.append(\"direccion\", direccion);\n    fd.append(\"nHabitaciones\", nHabitaciones);\n    fd.append(\"m2\", m2);\n    fd.append(\"nBanos\", nBanos);\n    fd.append(\"precio_piso\", precio_piso); // fd.append('ascensor', ascensor ? 1 : 0)\n    // fd.append('garaje', garaje ? 1 : 0)\n    // fd.append('balcon', balcon ? 1 : 0)\n    // fd.append('jardin', jardin ? 1 : 0)\n    // fd.append('latitude', latitude)\n    // fd.append('longitude', longitude)\n\n    fd.append(\"descripcion\", descripcion ? descripcion : []);\n    const res = await fetch(\"http://localhost:9999/vivienda\", {\n      headers: {\n        Authorization: login.token\n      },\n      body: fd,\n      method: \"POST\"\n    });\n\n    if (res.ok) {\n      history.push(`/user/${login.id}/Viviendas`);\n    } else {\n      console.log(\"Error\");\n      setError(true);\n    }\n  };\n\n  const handlePosition = newPosition => {\n    setPosition(newPosition);\n  };\n\n  const [preview, setPreview] = useState(null);\n\n  const handlePreview = e => {\n    e.preventDefault();\n    setPreview(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const hiddenUpload = React.useRef(null);\n\n  const handleUpload = e => {\n    e.preventDefault();\n    hiddenUpload.current.click();\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"createHome\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"An\\xFAnciate\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"createHomeContainer\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"showMap\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Pulsa en el marcador\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(NewMap, {\n          center: center,\n          position: position,\n          onChange: handlePosition\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"createHomeForm\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Rellena los datos\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"previewContainer\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Foto seleccionada:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this), preview && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"previewCreate\",\n                style: {\n                  backgroundImage: `url(${preview})`\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 107,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"pisoImagen\",\n                type: \"file\",\n                onChange: handlePreview,\n                ref: hiddenUpload,\n                style: {\n                  display: \"none\"\n                },\n                accept: \"image/*\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleUpload,\n                children: \"Sube una foto\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"ciudad\",\n            type: \"text\",\n            placeholder: \"Ciudad...\",\n            value: ciudad,\n            onChange: e => setCiudad(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"provincia\",\n            type: \"text\",\n            placeholder: \"Provincia...\",\n            value: provincia,\n            onChange: e => setProvincia(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 132,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"direccion\",\n            type: \"text\",\n            placeholder: \"Direccion...\",\n            value: direccion,\n            onChange: e => setDireccion(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"banos\",\n            type: \"number\",\n            placeholder: \"Ba\\xF1os...\",\n            value: nBanos,\n            onChange: e => setNBanos(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"habitaciones\",\n            type: \"number\",\n            placeholder: \"Habitaciones...\",\n            value: nHabitaciones,\n            onChange: e => setNHabitaciones(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"m2\",\n            type: \"number\",\n            placeholder: \"m2...\",\n            value: m2,\n            onChange: e => setM2(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 160,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            name: \"precio\",\n            type: \"number\",\n            placeholder: \"Precio...\",\n            value: precio_piso,\n            onChange: e => setPrecio_piso(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"homeFormOptions\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Ascensor\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  name: \"ascensor\",\n                  checked: ascensor,\n                  onChange: e => setAscensor(e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 178,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 176,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Garaje\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  name: \"garaje\",\n                  checked: garaje,\n                  onChange: e => setGaraje(e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 187,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 185,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 175,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Balc\\xF3n\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  name: \"balcon\",\n                  checked: balcon,\n                  onChange: e => setBalcon(e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 198,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: [\"Jard\\xEDn\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"checkbox\",\n                  name: \"jardin\",\n                  checked: jardin,\n                  onChange: e => setJardin(e.target.checked)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 205,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            name: \"descripcion\",\n            rows: \"4\",\n            cols: \"45\",\n            placeholder: \"\\xA1Cu\\xE9ntanos lo que te gusta de tu casa!\",\n            value: descripcion,\n            onChange: e => setDescripcion(e.target.value)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 13\n          }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"errorCreacion\",\n            children: \"Error en la creaci\\xF3n\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 23\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"publicarHome\",\n            children: \"Publicar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 225,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 89,\n    columnNumber: 5\n  }, this);\n}\n\n_s(CreateHome, \"DRsEwOElsda4Pg1s7UuL6GZFlSQ=\", false, function () {\n  return [useSelector, useHistory];\n});\n\n_c = CreateHome;\nexport default CreateHome;\n\nvar _c;\n\n$RefreshReg$(_c, \"CreateHome\");","map":{"version":3,"sources":["/home/hacker/Desktop/1inqui/INQUILINO-PERFECTO/inquilino-front/src/Viviendas/CreateHome.js"],"names":["React","useState","useSelector","useHistory","NewMap","CreateHome","center","lat","lng","ciudad","setCiudad","provincia","setProvincia","direccion","setDireccion","nHabitaciones","setNHabitaciones","m2","setM2","nBanos","setNBanos","precio_piso","setPrecio_piso","descripcion","setDescripcion","error","setError","login","s","history","handleSubmit","e","preventDefault","pisoImagen","target","files","fd","FormData","append","res","fetch","headers","Authorization","token","body","method","ok","push","id","console","log","handlePosition","newPosition","setPosition","preview","setPreview","handlePreview","URL","createObjectURL","hiddenUpload","useRef","handleUpload","current","click","position","backgroundImage","display","value","ascensor","setAscensor","checked","garaje","setGaraje","balcon","setBalcon","jardin","setJardin"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useHistory } from \"react-router-dom\";\nimport NewMap from \"../Utils/NewMap\";\n\nfunction CreateHome() {\n  const center = {\n    lat: 42.1617654,\n    lng: -8.6196778,\n  };\n\n  const [ciudad, setCiudad] = useState(\"\");\n  const [provincia, setProvincia] = useState(\"\");\n  const [direccion, setDireccion] = useState(\"\");\n  const [nHabitaciones, setNHabitaciones] = useState(\"\");\n  const [m2, setM2] = useState(\"\");\n  const [nBanos, setNBanos] = useState(\"\");\n  const [precio_piso, setPrecio_piso] = useState(\"\");\n  // const [ascensor, setAscensor] = useState(false)\n  // const [garaje, setGaraje] = useState(false)\n  // const [balcon, setBalcon] = useState(false)\n  // const [jardin, setJardin] = useState(false)\n  const [descripcion, setDescripcion] = useState(\"\");\n\n  // const [position, setPosition] = useState(center)\n  // const latitude = position.lat\n  // const longitude = position.lng\n\n  const [error, setError] = useState();\n\n  const login = useSelector((s) => s.login);\n\n  const history = useHistory();\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    const pisoImagen = e.target.pisoImagen.files[0];\n\n    const fd = new FormData();\n    fd.append(\"imagen\", pisoImagen);\n    fd.append(\"ciudad\", ciudad);\n    fd.append(\"provincia\", provincia);\n    fd.append(\"direccion\", direccion);\n    fd.append(\"nHabitaciones\", nHabitaciones);\n    fd.append(\"m2\", m2);\n    fd.append(\"nBanos\", nBanos);\n    fd.append(\"precio_piso\", precio_piso);\n    // fd.append('ascensor', ascensor ? 1 : 0)\n    // fd.append('garaje', garaje ? 1 : 0)\n    // fd.append('balcon', balcon ? 1 : 0)\n    // fd.append('jardin', jardin ? 1 : 0)\n    // fd.append('latitude', latitude)\n    // fd.append('longitude', longitude)\n    fd.append(\"descripcion\", descripcion ? descripcion : []);\n\n    const res = await fetch(\"http://localhost:9999/vivienda\", {\n      headers: { Authorization: login.token },\n      body: fd,\n      method: \"POST\",\n    });\n    if (res.ok) {\n      history.push(`/user/${login.id}/Viviendas`);\n    } else {\n      console.log(\"Error\");\n      setError(true);\n    }\n  };\n\n  const handlePosition = (newPosition) => {\n    setPosition(newPosition);\n  };\n\n  const [preview, setPreview] = useState(null);\n\n  const handlePreview = (e) => {\n    e.preventDefault();\n    setPreview(URL.createObjectURL(e.target.files[0]));\n  };\n\n  const hiddenUpload = React.useRef(null);\n\n  const handleUpload = (e) => {\n    e.preventDefault();\n    hiddenUpload.current.click();\n  };\n\n  return (\n    <div className=\"createHome\">\n      <h1>Anúnciate</h1>\n      <div className=\"createHomeContainer\">\n        <div className=\"showMap\">\n          <h3>Pulsa en el marcador</h3>\n          <NewMap\n            center={center}\n            position={position}\n            onChange={handlePosition}\n          />\n        </div>\n        <div className=\"createHomeForm\">\n          <h1>Rellena los datos</h1>\n          <form onSubmit={handleSubmit}>\n            <label>\n              <div className=\"previewContainer\">\n                <span>Foto seleccionada:</span>\n                {preview && (\n                  <div\n                    className=\"previewCreate\"\n                    style={{ backgroundImage: `url(${preview})` }}\n                  />\n                )}\n              </div>\n              <div>\n                <input\n                  name=\"pisoImagen\"\n                  type=\"file\"\n                  onChange={handlePreview}\n                  ref={hiddenUpload}\n                  style={{ display: \"none\" }}\n                  accept=\"image/*\"\n                />\n                <button onClick={handleUpload}>Sube una foto</button>\n              </div>\n            </label>\n            <input\n              name=\"ciudad\"\n              type=\"text\"\n              placeholder=\"Ciudad...\"\n              value={ciudad}\n              onChange={(e) => setCiudad(e.target.value)}\n            />\n            <input\n              name=\"provincia\"\n              type=\"text\"\n              placeholder=\"Provincia...\"\n              value={provincia}\n              onChange={(e) => setProvincia(e.target.value)}\n            />\n            <input\n              name=\"direccion\"\n              type=\"text\"\n              placeholder=\"Direccion...\"\n              value={direccion}\n              onChange={(e) => setDireccion(e.target.value)}\n            />\n            <input\n              name=\"banos\"\n              type=\"number\"\n              placeholder=\"Baños...\"\n              value={nBanos}\n              onChange={(e) => setNBanos(e.target.value)}\n            />\n            <input\n              name=\"habitaciones\"\n              type=\"number\"\n              placeholder=\"Habitaciones...\"\n              value={nHabitaciones}\n              onChange={(e) => setNHabitaciones(e.target.value)}\n            />\n            <input\n              name=\"m2\"\n              type=\"number\"\n              placeholder=\"m2...\"\n              value={m2}\n              onChange={(e) => setM2(e.target.value)}\n            />\n            <input\n              name=\"precio\"\n              type=\"number\"\n              placeholder=\"Precio...\"\n              value={precio_piso}\n              onChange={(e) => setPrecio_piso(e.target.value)}\n            />\n            <div className=\"homeFormOptions\">\n              <label>\n                <span>\n                  Ascensor\n                  <input\n                    type=\"checkbox\"\n                    name=\"ascensor\"\n                    checked={ascensor}\n                    onChange={(e) => setAscensor(e.target.checked)}\n                  />\n                </span>\n                <span>\n                  Garaje\n                  <input\n                    type=\"checkbox\"\n                    name=\"garaje\"\n                    checked={garaje}\n                    onChange={(e) => setGaraje(e.target.checked)}\n                  />\n                </span>\n              </label>\n              <label>\n                <span>\n                  Balcón\n                  <input\n                    type=\"checkbox\"\n                    name=\"balcon\"\n                    checked={balcon}\n                    onChange={(e) => setBalcon(e.target.checked)}\n                  />\n                </span>\n                <span>\n                  Jardín\n                  <input\n                    type=\"checkbox\"\n                    name=\"jardin\"\n                    checked={jardin}\n                    onChange={(e) => setJardin(e.target.checked)}\n                  />\n                </span>\n              </label>\n            </div>\n            <textarea\n              name=\"descripcion\"\n              rows=\"4\"\n              cols=\"45\"\n              placeholder=\"¡Cuéntanos lo que te gusta de tu casa!\"\n              value={descripcion}\n              onChange={(e) => setDescripcion(e.target.value)}\n            />\n            {error && <div className=\"errorCreacion\">Error en la creación</div>}\n            <button className=\"publicarHome\">Publicar</button>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default CreateHome;\n"]},"metadata":{},"sourceType":"module"}